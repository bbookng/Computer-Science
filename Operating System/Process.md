# Process

### âœ¨ í”„ë¡œì„¸ìŠ¤ì˜ ê°œë…

- Process ia a program in execution

**ğŸ“¢ í”„ë¡œì„¸ìŠ¤ì˜ ë¬¸ë§¥ (context)**

-  íŠ¹ì • ì‹œì ì„ ë†“ê³  ë³´ì•˜ì„ë•Œ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ê°€ ì–´ë””ê¹Œì§€ ì‹¤í–‰í–ˆê³  ì–´ë–¤ ìƒíƒœì¸ê°€

-  í”„ë¡œì„¸ìŠ¤ê°€ ìƒì„±ë˜ë©´ ì£¼ì†Œë¥¼ ë§Œë“¤ê³  CPUê°€ í•´ë‹¹ í”„ë¡œì„¸ìŠ¤ ìˆ˜í–‰ ì‹œì‘

-  ì–´ëŠ ì‹œì ì— í”„ë¡œì„¸ìŠ¤ëŠ” ì–´ë””ê¹Œì§€ ì™€ìˆëŠ”ê°€?

-  CPU ìˆ˜í–‰ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” í•˜ë“œì›¨ì–´ ë¬¸ë§¥ 

  - Program Counter - ì–´ë”œ ê°€ë¦¬í‚¤ê³  ìˆëŠ”ê°€? (í”„ë¡œì„¸ìŠ¤ì˜ ì–´ëŠ ë¶€ë¶„ì¸ê°€?)
  - ê°ì¢… register - ì–´ë–¤ instructionê¹Œì§€ ì‹¤í–‰í–ˆëŠ”ê°€?

-  í”„ë¡œì„¸ìŠ¤ì˜ ì£¼ì†Œ ê³µê°„

  - code, data, stack ì— ì–´ë–¤ ë‚´ìš©ì´ ë“¤ì–´ìˆëŠ”ê°€ ? 
    - data : queue, PCB

-  í”„ë¡œì„¸ìŠ¤ ê´€ë ¨ ì»¤ë„ ìë£Œ êµ¬ì¡°

  - PCB (Process Control Block)
    - Processê°€ í•˜ë‚˜ ìƒê¸¸ ë•Œ ë§ˆë‹¤ ìš´ì˜ì²´ì œëŠ” PCBëŠ” í•˜ë‚˜ì”© ë‘ê³  ìˆìœ¼ë©´ì„œ CPU, memoryë¥¼ ì–¼ë§ˆë‚˜ ì£¼ì–´ì•¼ í• ì§€ ê´€ë¦¬. 
    - ìš´ì˜ì²´ì œê°€ PCBë¥¼ ì–´ë–»ê²Œ í‰ê°€í•˜ëŠ”ì§€ ì•Œì•„ì•¼ í•¨
    - OSì—ì„œ í”„ë¡œì„¸ìŠ¤ë“¤ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ìë£Œêµ¬ì¡°
  - Kernel stack
    - ê° í”„ë¡œì„¸ìŠ¤ê°€ ìˆ˜í–‰ ë¶ˆê°€ëŠ¥í•œ ì‘ì—…ì„ ìœ„í•´ ì‹œìŠ¤í…œ ì½œì„ í•  ë•Œ ìŒ“ì´ëŠ” ìŠ¤íƒ
      - í”„ë¡œì„¸ìŠ¤ë³„ë¡œ ì»¤ë„ ìŠ¤íƒì„ ë”°ë¡œ ë‘ 

-  ë©€í‹° íƒœìŠ¤í‚¹ì„ ìœ„í•´ í”„ë¡œì„¸ìŠ¤ê°€ ë³€ê²½ë  ë•Œ ë¬¸ë§¥ì„ ë°±ì—… í•´ë‘ì–´ì•¼ í•¨.

   



### âœ¨ í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœ (Process State)

**ğŸ“¢ í”„ë¡œì„¸ìŠ¤ëŠ” ìƒíƒœ(state)ê°€ ë³€ê²½ë˜ë©° ìˆ˜í–‰ëœë‹¤**

- **Running**
  - CPUë¥¼ ì¡ê³  instructionì„ ìˆ˜í–‰ì¤‘ì¸ ìƒíƒœ
- **Ready**
  - CPUë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ìƒíƒœ(ë©”ëª¨ë¦¬ ë“± ë‹¤ë¥¸ ì¡°ê±´ì„ ëª¨ë‘ ë§Œì¡±í•˜ê³ )
  - ë¬¼ë¦¬ì ì¸ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ì™€ ìˆëŠ” ìƒíƒœ. CPUë§Œ ì–»ìœ¼ë©´ ë˜ëŠ” ìƒíƒœ
- **Blocked (wait, sleep)**
  - CPUë¥¼ ì£¼ì–´ë„ ë‹¹ì¥ instructionì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ëŠ” ìƒíƒœ
  - Process ìì‹ ì´ ìš”ì²­í•œ event(ì˜ˆ: I/O)ê°€ ì¦‰ì‹œ ë§Œì¡±ë˜ì§€ ì•Šì•„ ì´ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ìƒíƒœ
  - ì˜ˆ ) ë””ìŠ¤í¬ì—ì„œ fileì„ ì½ì–´ì™€ì•¼ í•˜ëŠ” ê²½ìš°
- **Suspended (stopped)**
  - ì™¸ë¶€ì ì¸ ì´ìœ (ì¤‘ê¸° ìŠ¤ì¼€ì¤„ëŸ¬, ì‚¬ìš©ì etc)ë¡œ í”„ë¡œì„¸ìŠ¤ì˜ ìˆ˜í–‰ì´ ì •ì§€ëœ ìƒíƒœ
  - í”„ë¡œì„¸ìŠ¤ëŠ” í†µì§¸ë¡œ ë””ìŠ¤í¬ì— swop out ëœë‹¤.
  - ex) ì‚¬ìš©ìê°€ í”„ë¡œê·¸ë¨ì„ ì¼ì‹œ ì •ì§€ ì‹œí‚¨ ê²½ìš° ì‚¬ìš©ìê°€ ë‹¤ì‹œ ì¬ê°œí•  ë•Œê¹Œì§€ Activeí•œ ìƒíƒœê°€ ë  ìˆ˜ ì—†ìŒ

- **New**
  - í”„ë¡œì„¸ìŠ¤ê°€ ìƒì„±ì¤‘ì¸ ìƒíƒœ
- **Terminated** 
  - ìˆ˜í–‰(excution)ì´ ëë‚œ ìƒíƒœ (ì•„ì§ í”„ë¡œì„¸ìŠ¤ëŠ” kill ë˜ì§€ ì•ŠìŒ)

â€‹    ![image-20220807003312377](assets/image-20220807003312377.png)



### âœ¨ Process Control Block (PCB)

- ìš´ì˜ì²´ì œê°€ ê° í”„ë¡œì„¸ìŠ¤ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ í”„ë¡œì„¸ìŠ¤ë‹¹ ìœ ì§€í•˜ëŠ” ì •ë³´

- ë‹¤ìŒì˜ êµ¬ì„± ìš”ì†Œë¥¼ ê°€ì§„ë‹¤. (êµ¬ì¡°ì²´ë¡œ ìœ ì§€)

  

![image-20220807005026670](assets/image-20220807005026670.png)



(1) OSê°€ ê´€ë¦¬ìƒ ì‚¬ìš©í•˜ëŠ” ì •ë³´

- Process state, Process ID
- scheduiling information, Priority

(2) CPU ìˆ˜í–‰ ê´€ë ¨ í•˜ë“œì›¨ì–´ ê°’

- Program counter, registers

(3) ë©”ëª¨ë¦¬ ê´€ë ¨

- Code, data, stackì˜ ìœ„ì¹˜ ì •ë³´ 

(4) íŒŒì¼ ê´€ë ¨

- Open file descriptros .. 



### âœ¨ ë¬¸ë§¥ êµí™˜ (Context Switch)

- CPUë¥¼ í•œ í”„ë¡œì„¸ìŠ¤ì—ì„œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¡œ ë„˜ê²¨ì£¼ëŠ” ê³¼ì •
- CPUê°€ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì—ê²Œ ë„˜ì–´ê°ˆ ë•Œ ìš´ì˜ì²´ì œëŠ” ë‹¤ìŒì„ ìˆ˜í–‰ (ë©”ëª¨ë¦¬ ì»¤ë„ì—ì„œ ìˆ˜í–‰)
  - CPUë¥¼ ë‚´ì–´ì£¼ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœë¥¼ ê·¸ í”„ë¡œì„¸ìŠ¤ì˜ PCBì— ì €ì¥
  - CPUë¥¼ ìƒˆë¡­ê²Œ ì–»ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ìƒíƒœë¥¼ PCBì—ì„œ ì½ì–´ì˜´

- System callì´ë‚˜ (í•˜ë“œì›¨ì–´) Interrupt ë°œìƒì‹œ ë°˜ë“œì‹œ context switchê°€ ì¼ì–´ë‚˜ëŠ” ê²ƒì€ ì•„ë‹˜
  - not context swtich: process A â†’ OS â†’ process A
    - ì´ë•Œë„ CPU ìˆ˜í–‰ ì •ë³´ ë“± contextì˜ ì¼ë¶€ë¥¼ PCBì— saveí•´ì•¼ í•˜ì§€ë§Œ Overheadê°€ ì ìŒ
  - context switch: process A â†’ process B
    - ìºì‹œ ë©”ëª¨ë¦¬ ëª¨ë‘ ì§€ì›€(flush) â†’ í° Overhead
  - ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ë¡œë¶€í„° CPUê°€ í”„ë¡œì„¸ìŠ¤ë¡œ ë„˜ì–´ê°€ëŠ” ê²ƒì„ context switchë¼ê³  í•˜ì§€ ì•ŠìŒ 



### âœ¨ í”„ë¡œì„¸ìŠ¤ë¥¼ ìŠ¤ì¼€ì¤„ë§í•˜ê¸° ìœ„í•œ í

- **Job queue**
  - í˜„ì¬ ì‹œìŠ¤í…œ ë‚´ì— ìˆëŠ” ëª¨ë“  í”„ë¡œì„¸ìŠ¤ì˜ ì§‘í•©
- **Ready queue**
  - í˜„ì¬ ë©”ëª¨ë¦¬ ë‚´ì— ìˆìœ¼ë©´ì„œ CPUë¥¼ ì¡ì•„ì„œ ì‹¤í–‰ë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ì§‘í•©
- **Device queues**
  - I/O deviceì˜ ì²˜ë¦¬ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ì§‘í•©
- í”„ë¡œì„¸ìŠ¤ë“¤ì€ ê° íë“¤ì„ ì˜¤ê°€ë©° ìˆ˜í–‰ëœë‹¤.



### âœ¨ ìŠ¤ì¼€ì¤„ëŸ¬ (Scheduler)

- **Long-term Scheduler (ì¥ê¸° ìŠ¤ì¼€ì¤„ëŸ¬ or job scheduler)**
  - ì‹œì‘ í”„ë¡œì„¸ìŠ¤ ì¤‘ ì–´ë–¤ ê²ƒë“¤ì„ ready queueë¡œ ë³´ë‚¼ ì§€ ê²°ì •
  - í”„ë¡œì„¸ìŠ¤ì— **memory (ë° ê°ì¢… ìì›)**ì„ ì£¼ëŠ” ë¬¸ì œ
    - ì‹œì‘ë  ë•Œ, ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ëŠ” ê²ƒì„ admit
  - **degree of Multiprogramming**ì„ ì œì–´
    - ë©”ëª¨ë¦¬ì— ì˜¬ë¼ê°€ ìˆëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ìˆ˜ë¥¼ ì œì–´
  - time sharing system ì—ëŠ” ë³´í†µ ì¥ê¸° ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì—†ìŒ (ë¬´ì¡°ê±´ ready)
- **Short-term Scheduler (ë‹¨ê¸° ìŠ¤ì¼€ì¤„ëŸ¬ or CPU scheduler)**
  - ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ë¥¼ ë‹¤ìŒë²ˆì— running ì‹œí‚¬ì§€ ê²°ì • 
  - í”„ë¡œì„¸ìŠ¤ì— **CPU**ë¥¼ ì£¼ëŠ” ë¬¸ì œ
  - ì¶©ë¶„íˆ ë¹¨ë¼ì•¼ í•¨ (millisecond ë‹¨ìœ„)
- **Medium-term Scheduler (ì¤‘ê¸° ìŠ¤ì¼€ì¤„ëŸ¬ or Swapper)**
  - **ì—¬ìœ  ê³µê°„ ë§ˆë ¨ì„ ìœ„í•´ í”„ë¡œì„¸ìŠ¤ë¥¼ í†µì§¸ë¡œ ë©”ëª¨ë¦¬ì—ì„œ ë””ìŠ¤í¬ë¡œ ì«“ì•„ëƒ„**
  - í”„ë¡œì„¸ìŠ¤ì—ê²Œì„œ memoryë¥¼ ëºëŠ” ë¬¸ì œ
  - degree of MultiProgrammingì„ ì œì–´



### âœ¨ Thread

**"A thread (or lightweight process) is a basic unit of CPU utilization"**

- Process ë‚´ë¶€ì— CPU ìˆ˜í–‰ë‹¨ìœ„ê°€ ì—¬ëŸ¬ê°œ ìˆëŠ” ê²ƒ

![image-20220807221108874](assets/image-20220807221108874-16598784646881.png)

**ğŸ“¢ Threadì˜ êµ¬ì„±**

- program counter
- register set
- stack space

**ğŸ“¢ Threadê°€ ë™ë£Œ threadì™€ ê³µìœ í•˜ëŠ” ë¶€ë¶„ (=task)**

- code section
- data section
- OS resources

**ğŸ“¢ ì „í†µì ì¸ ê°œë…ì˜ heavyweight processëŠ” í•˜ë‚˜ì˜ threadë¥¼ ê°€ì§€ê³  ìˆëŠ” taskë¡œ ë³¼ ìˆ˜ ìˆë‹¤**.

**ğŸ“¢ ì¥ì **

- ë‹¤ì¤‘ threadë¡œ êµ¬ì„±ëœ íƒœìŠ¤í¬ êµ¬ì¡°ì—ì„œëŠ” í•˜ë‚˜ì˜ ì„œë²„ threadê°€ blocked (waiting) ìƒíƒœì¸ ë™ì•ˆì—ë„ ë™ì¼í•œ  task ë‚´ì˜ ë‹¤ë¥¸ threadê°€ ì‹¤í–‰(running) ë˜ì–´ ë¹ ë¥¸ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.
- ë™ì¼í•œ ì¼ì„ ìˆ˜í–‰í•˜ëŠ” ë‹¤ì¤‘ threadê°€ í˜‘ë ¥í•˜ì—¬ ë†’ì€ ì²˜ë¦¬ìœ¨ (throughput)ê³¼ ì„±ëŠ¥ í–¥ìƒì„ ì–»ì„ ìˆ˜ ìˆë‹¤.
- threadë¥¼ ì‚¬ìš©í•˜ë©´ ë³‘ë ¬ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.
- **Responsiveness**
  - ex) multi-threaded Web - if one thread is blocked (ex. network), another thread continues (ex. display)
- **Resourece Sharing**
  - n threads can share binary code, data, resource of the process
- **Economy**
  - creating & CPU switching **thread** (rather than a **process**)
  - Solarisì˜ ê²½ìš° ìœ„ ë‘ ê°€ì§€ overheadê°€ ê°ê° 30ë°°, 5ë°°
- **Utilization of MP Architectures**
  - each thread may be running in **parallel** on a different processor



### âœ¨ Implementation of Threads

**ğŸ“¢ Some are supported by kernal > kenel Threads**

- Windows 95/98/NT
- Solaris
- Digital UNIX, Mach

**ğŸ“¢Others are supported by library > User Threads**

- POSIX Pthreads
- Mach C-threads
- Solaris threads

**ğŸ“¢ Some are real-time threads**



# â¤ï¸ ì§ˆë¬¸

### âœ¨ Question

1. í”„ë¡œì„¸ìŠ¤ì™€ ìŠ¤ë ˆë“œì˜ ì°¨ì´ë¥¼ ì„¤ëª…í•´ë³´ì„¸ìš”.
2. ë™ê¸°ì‹ ì…ì¶œë ¤ê³¼ ë¹„ë™ê¸°ì‹ ì…ì¶œë ¥ì˜ ì°¨ì´ì— ëŒ€í•´ ì„¤ëª…í•´ë³´ì„¸ìš”.



### âœ¨ Answer

1. 
2. 

